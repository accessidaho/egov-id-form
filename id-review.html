<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="id-form-styles.html">
<link rel="import" href="./dependencies.html">

<!--
`id-review` Readonly form field for use building reviews.

@demo demo/index.html
-->

<dom-module id="id-review">
  <template>
    <style include="id-form-styles">
      #fieldControl {
        padding-top: 7px;
      }

      input, textarea {
        border: 0;
        background: transparent;
        padding: 0;
        margin: 0;
        width: 100%;
      }
    </style>

    <template is="dom-if" if="[[label]]">
      <label id="fieldLabel">[[label]]</label>
    </template>
    <div id="fieldControl">
      [[bindValue]]
    </div>
  </template>

  <script>
    class IdReview extends Polymer.Element {
      static get is() { return 'id-review'; }
      static get properties() {
        return {
          /**
           * The value for this input.
          **/
          bindValue: {
            type: String,
            observer: '__updateValue'
          },
          /**
           * The label for this input.
          **/
          label: String,
          /**
           * The name for this input.
          **/
          boolText: {
            type: Array,
            value: ['Not checked', 'Checked']
          },
          /**
           * The masking for the input. <i>For more information, see the [Inputmask 3.x](https://github.com/RobinHerbots/Inputmask) documentation.</i>
          **/
          mask: Object,
        };
      }

      /**
       * Update the bound value. Applies options.
       * @return null
       */
      __updateValue() {

        // Replace boolean with boolText index.
        if (typeof(this.bindValue) === "boolean") {
          let index = (this.bindValue) ? 1 : 0;
          this.bindValue = this.boolText[index];
        }

        // Set for null values.
        if (this.bindValue === null) {
          this.bindValue = this.boolText[0];
        }

        if (this.mask) {
          Polymer.dom(this.$.fieldControl).innerHTML = '';

          let maskedInputNode = document.createElement('input');
          maskedInputNode.setAttribute('id', 'input');
          maskedInputNode.className = 'id-review style-scope';
          this.$.fieldControl.appendChild(maskedInputNode);
          maskedInputNode.value = this.bindValue;

          new Cleave(maskedInputNode, this.mask);
        }

      }
    }

    window.customElements.define(IdReview.is, IdReview);
  </script>
</dom-module>

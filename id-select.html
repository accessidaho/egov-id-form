<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="id-form-styles.html">

<!--
`id-select` Select form field with Idaho styling.

@demo demo/index.html
-->

<dom-module id="id-select">
  <template>
    <style include="id-form-styles">

      @media (min-width: 768px) {
        :host(.lg) input {
          width: 80%;
        }

        :host(.md) input {
          width: 50%;
        }

        :host(.sm) input {
          width: 25%;
        }

        :host(.xs) input {
          width: 15%;
        }
      }

      select {
        font-size: 100%;
        display: block;
        width: 100%;
        padding: .5rem .75rem;
        line-height: 1.25;
        color: #464a4c;
        background-color: #fff;
        background-image: none;
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        border: 1px solid rgba(0,0,0,.15);
        border-radius: .25rem;
        height: 2.25rem;
        -webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
        transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
        -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
        transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
        transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
      }

      select:focus {
        color: #464a4c;
        background-color: #fff;
        border-color: #5cb3fd;
        outline: 0;
      }

    </style>
    <label class="field-label">[[label]]</label><div class="field-control">
      <select name$="[[name]]" on-change="_select">
        <template is="dom-repeat" items="{{choices}}">
            <option value$="[[item]]" selected="{{_selected(item, bindValue)}}">[[item]]</option>
        </template>
      </select>
    </div>
  </template>

  <script>
    class IdSelect extends Polymer.Element {
      static get is() { return 'id-select'; }
      static get properties() {
        return {
          /**
           * The value for this input.
          **/
          bindValue: {
            type: String,
            notify: true,
            value: ''
          },
          /**
           * The label for this input.
          **/
          label: String,
          /**
           * The name for this input.
          **/
          name: String,
          /**
           * Description text appearing above the input.
          **/
          hint: String,
          /**
           * Extends the input to full width.
          **/
          fullWidth: {
            type: Boolean,
            value: false
          },
          /**
           * List of possible values for the radios.
          **/
          choices: Array,
          /**
           * Determines whether to apply the invalid style.
          **/
        };
      }

      /**
       * Determines if the radio is selected.
       * @param  {string} item      Value of item to check.
       * @param  {string} bindValue Value of bindValue variable.
       * @return boolean            Is selected.
       */
      _selected(item, bindValue) {
        return (item === bindValue);
      }

      /**
       * On change event for when a radio is selected
       * @param  {object} e      Event detail
       * @param  {detail} detail Detail for event
       * @param  {object} sender Node that sent the event
       * @return null
       */
      _select(e, detail, sender) {
        this.select(e.target.value);
      }

      /**
       * Set the current selected value.
       * @param  {string} value Value to set
       * @return null
       */
      select(value) {
        this.set('bindValue', value);
      }

      /**
       * Sets the invalid boolean for styling.
       * @param  {boolean} valid Is the input valid or not.
       * @return null
       */
      validate(valid) {
        this.set('invalid', !valid);
      }
    }

    window.customElements.define(IdSelect.is, IdSelect);
  </script>
</dom-module>
